<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Dashboard Monitoring Sensor Raspberry Pi</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #e9eef5;
        margin: 0;
        padding: 0;
    }

    /* HEADER */
    .header {
        background: #1b3c73;
        color: white;
        padding: 20px;
        text-align: center;
        font-size: 30px;
        font-weight: bold;
        box-shadow: 0 3px 8px rgba(0,0,0,0.2);
    }

    /* GRID LAYOUT */
    .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
        padding: 20px;
    }

    /* SENSOR CARD */
    .sensor-box {
        background: white;
        padding: 20px;
        border-radius: 15px;
        font-size: 22px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        transition: 0.3s;
    }

    /* SAFE */
    .safe {
        border-left: 12px solid #2ecc71;
    }

    /* DANGER */
    .danger {
        border-left: 12px solid #e74c3c;
        animation: blink 1.1s infinite;
    }

    /* ALERT BLINK */
    @keyframes blink {
        50% { background-color: #ffe6e6; }
    }

    /* STATUS TEXT */
    .status {
        font-weight: bold;
        display: block;
        margin-top: 10px;
    }

    /* ICON BESAR */
    .icon {
        font-size: 40px;
    }

    .time-box {
        text-align: center;
        padding-bottom: 10px;
        font-size: 18px;
        color: #333;
    }
</style>

</head>
<body>

<!-- HEADER -->
<div class="header">ðŸ”¥ðŸ“¡ðŸšª Dashboard Monitoring Sensor Raspberry Pi</div>

<!-- Waktu -->
<div class="time-box">
    Terakhir Update: <span id="time">-</span>
</div>

<!-- GRID SENSOR -->
<div class="grid">

    <div id="box_fire" class="sensor-box safe">
        <span class="icon">ðŸ”¥</span> Flame Sensor
        <span id="fire" class="status"></span>
    </div>

    <div id="box_vibration" class="sensor-box safe">
        <span class="icon">ðŸ“¡</span> Vibration Sensor
        <span id="vibration" class="status"></span>
    </div>

    <div id="box_mag1" class="sensor-box safe">
        <span class="icon">ðŸšª</span> Door Sensor 1
        <span id="mag1" class="status"></span>
    </div>

    <div id="box_mag2" class="sensor-box safe">
        <span class="icon">ðŸšª</span> Door Sensor 2
        <span id="mag2" class="status"></span>
    </div>

    <div id="box_buzzer" class="sensor-box safe">
        <span class="icon">ðŸ””</span> Buzzer Status
        <span id="buzzer" class="status"></span>
    </div>

</div>


<script>
function updateSensor() {
    fetch("http://YOUR_PI_IP:5000/sensor")   // Ganti dengan IP Raspberry Pi
        .then(res => res.json())
        .then(data => {

            let timeNow = new Date().toLocaleTimeString();
            document.getElementById("time").innerHTML = timeNow;

            // ========= FLAME SENSOR =========
            if (data.fire === 1) {
                setSafe("box_fire", "fire", "Tidak Ada Api");
            } else {
                setDanger("box_fire", "fire", "ðŸ”¥ TERDETEKSI API!");
            }

            // ========= VIBRATION SENSOR =========
            if (data.vibration === 1) {
                setSafe("box_vibration", "vibration", "Tidak Ada Getaran");
            } else {
                setDanger("box_vibration", "vibration", "ðŸ“¡ GETARAN TERDETEKSI!");
            }

            // ========= MAGNET 1 =========
            if (data.mag1 === 0) {
                setSafe("box_mag1", "mag1", "Pintu 1 Tertutup");
            } else {
                setDanger("box_mag1", "mag1", "ðŸš¨ Pintu 1 Terbuka!");
            }

            // ========= MAGNET 2 =========
            if (data.mag2 === 0) {
                setSafe("box_mag2", "mag2", "Pintu 2 Tertutup");
            } else {
                setDanger("box_mag2", "mag2", "ðŸš¨ Pintu 2 Terbuka!");
            }

            // ========= BUZZER =========
            if (data.alert) {
                setDanger("box_buzzer", "buzzer", "ðŸ”” Buzzer Menyala");
            } else {
                setSafe("box_buzzer", "buzzer", "ðŸ”• Buzzer Mati");
            }
        });
}

function setSafe(box, textId, text) {
    document.getElementById(box).className = "sensor-box safe";
    document.getElementById(textId).innerHTML = text;
}

function setDanger(box, textId, text) {
    document.getElementById(box).className = "sensor-box danger";
    document.getElementById(textId).innerHTML = text;
}

setInterval(updateSensor, 1000);
</script>

</body>
</html>
