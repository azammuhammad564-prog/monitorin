<!DOCTYPE html>
<html>
<head>
    <title>Raspberry Pi Sensor Dashboard</title>
    <style>
        body {
            font-family: Arial;
            background: #f2f2f2;
            padding: 20px;
        }
        .card {
            background: white;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 10px;
            box-shadow: 0px 0px 6px #ccc;
        }
        .alert { color: red; font-weight: bold; }
        .safe { color: green; }
    </style>
</head>
<body>

<h2>ðŸ”¥ Raspberry Pi Real-Time Sensor Monitoring</h2>

<div class="card">
    <p>Fire Sensor: <span id="fire"></span></p>
</div>

<div class="card">
    <p>Vibration Sensor: <span id="vib"></span></p>
</div>

<div class="card">
    <p>Door 1: <span id="door1"></span>
        (Mute: <span id="mute1"></span>)
    </p>
</div>

<div class="card">
    <p>Door 2: <span id="door2"></span>
        (Mute: <span id="mute2"></span>)
    </p>
</div>

<div class="card">
    <p>Buzzer Alarm: <span id="alarm"></span></p>
</div>

<script>
async function updateData() {
    try {
        const res = await fetch("http://10.72.2.216:5000/sensor");
        const data = await res.json();

        document.getElementById("fire").innerHTML =
            data.fire_state ? "<span class='safe'>No Fire</span>" :
                        "<span class='alert'>FIRE ALERT</span>";

        document.getElementById("vib").innerHTML =
            data.vib_state ? "<span class='safe'>No Vibration</span>" :
                             "<span class='alert'>VIBRATION ALERT</span>";

        document.getElementById("door1").innerHTML =
            data.mag1_state ? "<span class='alert'>OPEN</span>" :
                         "<span class='safe'>Closed</span>";

        document.getElementById("door2").innerHTML =
            data.mag2_state ? "<span class='alert'>OPEN</span>" :
                         "<span class='safe'>Closed</span>";

        document.getElementById("mute1").innerHTML =
            data.mute_pintu1 ? "ON" : "OFF";

        document.getElementById("mute2").innerHTML =
            data.mute_pintu2 ? "ON" : "OFF";

        document.getElementById("alarm").innerHTML =
            data.alarm ? "<span class='alert'>ACTIVE</span>" :
                         "<span class='safe'>OFF</span>";

    } catch (err) {
        console.log("Connection Error", err);
    }
}

setInterval(updateData, 1000);
updateData();
</script>

</body>
</html>
